
<!DOCTYPE html>
<html>
<head>
    <title>This should be some catchy title</title>
    <script src="http://code.createjs.com/easeljs-0.7.0.min.js"></script>
    <script src="boat.js"></script>
    <script src="world.js"></script>
    <script>
        var stage;
        var debug;
        var boat;
        var world;
        var keys = {};

        function keyDown(event)
        {
            keys[event.keyCode] = true;
        }

        function keyUp(event)
        {
            delete keys[event.keyCode];
        }

        function createObjects()
        {
            world = new World(stage);
            boat = new Boat(stage, world, 150, 150);
            debug = stage.addChild(new createjs.Text("", "16px monospace", "#000"));
            debug.lineHeight = 15;
            debug.textBaseline = "top";
            debug.x = 10;
            debug.y = debug.lineHeight*3-10;
        }

        function tick(event) {
            if(createjs.Ticker.getPaused()) return;
            debug.text = "FPS: " + createjs.Ticker.getMeasuredFPS(createjs.Ticker.getTicks(false)).toFixed(1);
            world.simulate(event);
            boat.simulate(event, keys);
            stage.update(event);
        }
        function init()
        {
            stage = new createjs.Stage("simulationCanvas");
            createObjects();
            createjs.Ticker.on("tick", tick);
            createjs.Ticker.setFPS(45);

            this.document.onkeydown = keyDown;
            this.document.onkeyup = keyUp;  
        }

        function togglePause()
        {
            var paused = !createjs.Ticker.getPaused();
            createjs.Ticker.setPaused(paused);
            document.getElementById("pauseBtn").value = paused ? "Resume simulation" : "Pause simulation";
        }
    </script>
</head>
<body onload="init(); " bgcolor="#22BBEE">
<input type="button" value="Pause simulation" id="pauseBtn" onclick="togglePause();"><br>

<table width="100%">
  <tr>
    <td> 
        <canvas id="simulationCanvas" width="1000" height="700">
            alternate content
        </canvas>
    </td>
    <td>
        Speed:<br>
        <input type="text" id="boat_speed"><br>
        Longitudinal force:<br>
        <input type="text" id="longitudinal_force"><br>
        Direction:<br>
        <input type="text" id="boat_direction"><br>
        SailDir:<br>
        <input type="text" id="sail_dir"><br>
        Absolute SailDir:<br>
        <input type="text" id="abs_sail_dir"><br>
        Wind force applied to sail:<br>
        <input type="text" id="wind_force"><br>
        Sail force:<br>
        <input type="text" id="sail_force"><br>
        Sail suction:<br>
        <input type="text" id="sail_suction"><br>          
        RudderDir:<br>
        <input type="text" id="rudder_dir"><br>
        X:<br>
        <input type="text" id="boat_x"><br>
        Y:<br>
        <input type="text" id="boat_y"><br>
        Wind speed:<br>
        <input type="text" id="wind_speed"><br>
        Wind direction:<br>
        <input type="text" id="wind_dir"><br>
        World X:<br>
        <input type="text" id="world_x_shift"><br>
        World Y:<br>
        <input type="text" id="world_y_shift"><br>
    </td>
  </tr>
</table>

</body>
</html>